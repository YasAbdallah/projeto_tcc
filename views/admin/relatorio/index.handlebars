<section class="container border shadow p-3">
    <a class="btn btn-link" href="/admin">Voltar</a>
    <div class="d-flex justify-content-between m-3">
        <div class="align-content-start">
            <h1>Lista de Solicitações</h1>
            <button class="btn btn-danger" name="relatorio" data-bs-toggle="modal" data-bs-target="#modalRelatorior">
                Gerar Relatório <i class="fa-solid fa-file-lines"></i>
            </button>
            <input type="hidden" id="nomeUsuarioLogado" value="{{user.nome}}">
        </div>
        <div class="align-content-center">
            <form action="/admin/relatorio/mensal/search" method="get" id="pesquisaProduto" class="d-flex flex-row">
                <div class="form-floating p-2">
                    <input type="date" name="dataInicial" id="dataInicial" class="form-control">
                    <label for="dataInicial">Data Inicial:</label>
                </div>
                <div class="input-group form-floating p-2">
                    <input type="date" name="dataFinal" id="dataFinal" class="form-control">
                    <label for="dataFinal">Data Final:</label>
                    <button type="submit" class="btn btn-secondary">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
    <section class="list-group m-3">
        {{#unless solicitacao}}
        <p class="fs-3">Não há solicitações para gerar relatório.</p>
        {{else}}
        <table class="table table-striped tabel-hover" id="tabelaRelatorio">
            <thead>
                <tr class="fs-5">
                    <th>Solicitante</th>
                    <th>Setor</th>
                    <th>Código</th>
                    <th>Produto</th>
                    <th>Quantidade</th>
                    <th>Data da Solicitação</th>
                </tr>
            </thead>
            <tbody>
                {{#each solicitacao}}
                <tr>
                    {{#unless usuario}}
                    <td>Usuário inexistente.</td>
                    {{else}}
                    <td>{{usuario.nome}}</td>
                    {{/unless}}
                    <td>{{setor.sigla}}</td>
                    <td>{{codigo}}</td>
                    <td>{{produto}}</td>
                    <td>{{qnt}}</td>
                    <td name="data">{{data}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </section>
    {{> _paginacao}}
    {{/unless}}
</section>
<div class="modal fade" id="modalRelatorior" tabindex="-1" aria-labelledby="modalRelatoriorLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="modalRelatoriorLabel">Gerar Relatório</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
                <p>Selecione as datas para gerar o relatório.</p>
                <form action="/admin/relatorio/gerar" method="get">
                    <div class="row mb-3">
                        <div class="col-sm-6">
                            <label for="dataInicial" class="form-label">Data Inicial:</label>
                            <input type="date" name="dataInicial" id="dataInicial" class="form-control" required>
                        </div>
                        <div class="col-sm-6">
                            <label for="dataFinal" class="form-label">Data Final:</label>
                            <input type="date" name="dataFinal" id="dataFinal" class="form-control" required>
                        </div>
                    </div>
                    <div class="d-flex mb-3 justify-content-end">
                        <div class="btn-toolbar" role="toolbar">
                            <div class="btn-group me-2">
                                <button type="submit" class="btn btn-primary">Gerar Relatório</button>
                            </div>
                            <div class="btn-group me-2">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
